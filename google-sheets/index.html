<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Jadual Giliran Bacaan Al Mulk dan Al Mathurat Rakan Pusat Islam</title>
  <meta name="description" content="Rakan Pusat Islam UiTM Permatang Pauh"/>
  <meta name="keywords" content="Jadual Giliran Bacaan Al Mulk dan Al Mathurat Rakan Pusat Islam, rpi, uitmcpp, universiti teknologi mara, permatang pauh, rakan pusat islam, jadual al-mulk, jadual hadis, jadual al-mathurat, insan terpilih"/>
  <style>
    * { font-family: Arial, Helvetica, sans-serif;}
    body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
    table { border-collapse: collapse; margin: 0 auto; }
    th, td { border: 1px solid #ccc; padding: 10px 20px; font-family:'Courier New', Courier, monospace;}
    th { background-color: #f2f2f2; }
    td{ font-weight:bold; }
    footer{ position: absolute; bottom: 20px;text-align: center;left: 0;right: 0;font-size: 12px;}
  </style>
</head>
<body bgcolor="gray">
  <h2>INSAN TERPILIH HARI INI</h2>
  <div id="result">Sabar itu sebahagian daripada iman...</div>
    <footer>
        <span>Website diselenggara oleh <a href="https://wa.me/+60169749725">Daniel Hakim</a>. Apa-apa hal contact beliau.</span>
    </footer>
  <script>
    const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRCHNgiQ820OWKj2IU0ETuLc7rR_FRvAJh-6auCRBWXZtJjy-9LuxaPJ2RAcirXQNTzLym-E8zfHBH1/pub?gid=0&single=true&output=csv';
    fetch(csvUrl)
      .then(response => response.text())
      .then(data => {
        const lines = data.trim().split('\n');
        const headers = lines[0].split(',');
        const today = new Date().toISOString().split('T')[0]; // format: YYYY-MM-DD

        let found = false;

        for (let i = 1; i < lines.length; i++) {
          const row = lines[i].split(',');
          const date = row[0].trim();

          if (date === today) {
            found = true;
            document.getElementById('result').innerHTML = `
              <table>
                <thead>
                  <tr>
                    <th>Tarikh</th>
                    <th>Al-Mulk</th>
                    <th>Al-Ma'thurat</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>${date}</td>
                    <td>${row[1].trim()}</td>
                    <td>${row[2].trim()}</td>
                  </tr>
                </tbody>
              </table>
              <br><br><br><br>
              <p><b>Nota:<b><br><i>
                Jika anda tidak dapat hadir, sila cari pengganti anda lebih awal.<br>Walaupun amalan kecil tetap dianggap amanah.<br><br>
                Untuk yang baca Al Mathurat, baca hadis sebelum bacaan al-mathurat.<br>Pilih hadis pendek saja.
                </i></p>
            `;
            break;
          }
        }

        if (!found) {
          document.getElementById('result').innerHTML = "Tiada giliran untuk hari ini.";
        }
      })
      .catch(err => {
        console.error("Ralat:", err);
        document.getElementById('result').innerHTML = "<font color=\"red\">Gagal bersambung dengan server.</font><br>Cuba refresh halaman atau contact admin <a href=\"https://wa.me/+60169749725\">Daniel Hakim</a>";
      });
  </script>
</body>
</html>

